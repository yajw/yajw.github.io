{"pageProps":{"post":{"title":" 问题收集总结","comments":true,"date":"2021-02-17T00:00:00.000Z","tags":[],"categories":["总结"],"modifyTime":"2021-03-27 14:49:15 +0800","createTime":"2021-03-27 14:49:15 +0800","logs":[{"status":["A"],"files":["\"2021-03-27 \\351\\227\\256\\351\\242\\230\\346\\224\\266\\351\\233\\206\\346\\200\\273\\347\\273\\223.md\""],"abbrevHash":"f4f4061","hash":"f4f406175bde5279c552d8bac1c05cf7bb72d58e","subject":"Copy old posts","authorName":"yajw","authorDate":"2021-03-27 14:49:15 +0800"}],"link":"2021-03-27%20%E9%97%AE%E9%A2%98%E6%94%B6%E9%9B%86%E6%80%BB%E7%BB%93","id":"a6eb5357-bd31-4025-a490-0a8abce85681","content":"<p>backlog过小导致accept queue满，导致客户端连接超时：https://www.infoq.cn/article/y5KYxYeVPXAlHI1Y8ylX</p>\n<p>#事故学习#支付任务没有发成功邮件，但是支付已经成功了，人工重试导致重复付款。\n总结：一定要考虑一致性、事务，任务重试需要考虑是否幂等。</p>\n<p>模拟connection timeout：\nhttps://gist.github.com/anthavio/5092439</p>\n<p>思路：server socket backlog 设置1，起一个客户端去占用连接数，其他的连接会连接超时</p>\n"}},"__N_SSG":true}