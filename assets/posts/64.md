
#feature swtich#
#redis缓存刷新#

默认缓存定期失效
手动触发缓存失效
可靠降级：缓存读不到，能够可靠降级到读db
失效和超时由远端控制，避免出现本地脏读
时间由远端定义
方案1

redis的超时机制，超时删除key
value使用远端时间戳表示版本
当读到时，对比和本地的版本，如果发现不一致，就读db刷新本地，然后更新本地版本
当读不到时，尝试远程更新，用CAS方式刷新远程版本，注意一定避免并发导致的脏读
降级：缓存时间不要太久，最好5分钟左右，减少故障损失
远程更新失败：降级到读db
方案2
使用Redis的发布订阅功能
问题：要保持长连接


